# lumenrtc_roslyn_codegen

LumenRTC-specific Roslyn-based generator for C# native interop declarations.

Input:

- ABI IDL JSON generated by `abi_framework` (schema v1/v2, for example `abi/generated/lumenrtc/lumenrtc.idl.json`).

Output:

- C# partial `NativeMethods` file with `DllImport` declarations.

## Usage

```bash
dotnet run --project tools/lumenrtc_roslyn_codegen/LumenRTC.Abi.RoslynGenerator.csproj -- \
  --idl abi/generated/lumenrtc/lumenrtc.idl.json \
  --output abi/generated/lumenrtc/NativeMethods.g.cs \
  --namespace LumenRTC.Interop \
  --class-name NativeMethods \
  --access-modifier internal \
  --calling-convention Cdecl \
  --library-expression LibName
```

Check mode for CI:

```bash
dotnet run --project tools/lumenrtc_roslyn_codegen/LumenRTC.Abi.RoslynGenerator.csproj -- \
  --idl abi/generated/lumenrtc/lumenrtc.idl.json \
  --output abi/generated/lumenrtc/NativeMethods.g.cs \
  --check
```

Wrapper shortcut:

```bash
scripts/abi.sh roslyn
scripts/abi.sh roslyn --check
```

The `abi_framework` plugin host can run this generator via:

```bash
scripts/abi.sh codegen --target lumenrtc --check
```
